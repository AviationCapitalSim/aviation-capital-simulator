<!-- ============================================================
     üè¶ ACS BANK CENTER ‚Äî HISTORICAL CREDIT AUTHORITY
     Version: 1.0
     Date: 14 FEB 2026
     Engine: engine/acs_bank.js
     ============================================================ -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bank ‚Äî Aviation Capital Simulator</title>

  <!-- ======== ACS Styles ======== -->
  <link rel="stylesheet" href="styles.css?v=3.1" />

  <!-- ======== ACS Favicons ======== -->
  <link rel="icon" type="image/png" sizes="16x16" href="acs_logo_16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="acs_logo_32.png">
  <link rel="icon" type="image/png" sizes="64x64" href="acs_logo_64.png">
  <link rel="apple-touch-icon" href="acs_logo_180.png">
  <link rel="manifest" href="manifest.json">

  <style>
    body{
      margin:0;
      background:#081530;
      color:white;
      font-family:"Poppins",sans-serif;
    }

   /* ============================================================
   HEADER ‚Äî SHARED ACS STANDARD
   ============================================================ */
.acs-header{
  position:fixed;
  top:0;
  width:100%;
  box-sizing:border-box; /* ‚Üê FIX CR√çTICO */
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:.8rem 2rem;
  background:rgba(12,23,50,.45);
  backdrop-filter:blur(9px);
  border-bottom:2px solid #ffb300;
  z-index:5000;
}

.acs-logo{
  display:flex;
  align-items:center;
  gap:1rem;
}

.acs-logo img{
  height:46px;
}

.acs-logo h1{
  margin:0;
  font-size:1.1rem;
  color:#ffb300;
}

.acs-nav{
  display:flex;
  gap:2rem;
}

.acs-nav a{
  text-decoration:none;
  color:#dbe4ff;
}

.acs-nav a.active{
  color:#ffb300;
}

/* ============================================================
   üü¶ RIGHT HEADER AREA ‚Äî PERFECT SPACING & CLOCK ALIGNMENT
   ============================================================ */

.acs-right{
  display:flex;
  align-items:center;
  gap:14px;              /* espacio real entre botones y reloj */
  padding-right:12px;    /* aire contra borde derecho */
  flex-shrink:0;
}

.support-btn{
  padding:.45rem 1.1rem;
  border-radius:12px;
  font-size:.9rem;
  font-weight:600;
  text-decoration:none;
  color:#8AB4FF;
  border:1px solid rgba(138,180,255,.45);
  background:rgba(138,180,255,.08);
}

.logout-btn{
  padding:.45rem 1.1rem;
  border:1px solid #ffb300;
  border-radius:12px;
  background:rgba(255,179,0,.05);
  color:#ffb300;
  font-weight:600;
  cursor:pointer;
}

/* ============================================================
   üü¶ ACS GLOBAL CLOCK ‚Äî STABLE HEADER FIX (NO LAYOUT SHIFT)
   Use in ALL ACS modules
   ============================================================ */

.acs-clock-header{

  font-family:"Orbitron",monospace;
  font-size:.95rem;
  color:#00ff80;

  background:rgba(0,255,128,.08);
  border-radius:10px;

  padding:.45rem .8rem;

  width:260px;                 /* ancho fijo absoluto */
  flex:0 0 260px;             /* evita expansi√≥n o compresi√≥n */

  display:flex;
  justify-content:center;
  align-items:center;

  white-space:nowrap;

  font-variant-numeric:tabular-nums;

  border:1px solid rgba(0,255,128,.18);

  overflow:hidden;            /* protecci√≥n extra */
}

    /* ================= MAIN ================= */
    .acs-main{
      padding:120px 30px 70px;
      max-width:1200px;
      margin:auto;
    }

    .title{
      font-size:2rem;
      font-weight:600;
      color:#ffca3a;
      margin-bottom:0.4rem;
      text-shadow:0 0 6px rgba(255,190,60,0.55), 0 0 12px rgba(255,190,60,0.35);
    }

    .subtitle{
      font-size:1.05rem;
      color:#cbd6ff;
      opacity:0.9;
      text-shadow:0 0 4px rgba(200,210,255,0.25);
      margin-bottom:28px;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:18px;
      margin-bottom:24px;
    }

    .card{
      background:linear-gradient(180deg, rgba(20,35,70,0.75), rgba(10,18,40,0.85));
      padding:18px 18px;
      border-radius:18px;
      box-shadow:0 0 25px rgba(0,0,0,0.4);
      border:1px solid rgba(255,179,0,0.15);
    }

    .card h3{
      margin:0 0 10px;
      color:#ffb300;
      text-shadow:0 0 6px rgba(255,179,0,0.35);
      font-size:1.15rem;
    }

    .value{
      font-family:"Orbitron",monospace;
      font-size:1.25rem;
      color:#00ff80;
    }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
    }
    th, td{
      padding:10px;
      border-bottom:1px solid rgba(255,255,255,0.10);
      font-size:0.95rem;
    }
    th{ color:#ffb300; text-align:left; }

    .btn{
      margin-top:16px;
      background:#00a86b;
      border:none;
      padding:0.7rem 1.1rem;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      transition:0.25s;
      color:white;
    }
    .btn:hover{ background:#00794f; }

    .hint{
      font-size:0.9rem;
      color:#9fb3ff;
      opacity:0.9;
      margin-top:10px;
    }
  </style>
</head>

<body>

<header class="acs-header">
  <div class="acs-logo">
    <img src="acs_logo.png" alt="ACS Logo" />
    <h1>Aviation Capital Simulator</h1>
  </div>

  <nav class="acs-nav">
    <a href="dashboard.html">Main</a>
    <a href="bank.html" class="active">Bank</a>
    <a href="aircraft.html">Aircraft</a>
    <a href="routes.html">Routes</a>
    <a href="hr.html">HR</a>
    <a href="forum.html">Forum</a>
  </nav>

  <div class="acs-right">
    <a href="support.html" class="support-btn">Support</a>
    <a class="logout-btn" onclick="handleLogout()">Logout</a>
   <div id="acs-clock" class="acs-clock-header">
  <span class="clock-text">20:10 ‚Äî MON 09 JUN 1941</span>
</div>
  
</div>
  
</header>

<main class="acs-main">

  <div class="title">Bank Authority</div>
  <div class="subtitle">Historical aviation credit system (1940‚Äì2030)</div>

  <section class="grid">
    <div class="card">
      <h3>Current Year</h3>
      <div class="value" id="year">‚Äî</div>
    </div>

    <div class="card">
      <h3>Fleet Collateral Value</h3>
      <div class="value" id="fleet">‚Äî</div>
    </div>

    <div class="card">
      <h3>Loan Capacity Available</h3>
      <div class="value" id="capacity">‚Äî</div>
    </div>

    <div class="card">
      <h3>Interest Rate</h3>
      <div class="value" id="rate">‚Äî</div>
    </div>
  </section>

  <section class="card">
    <h3>Active Loans</h3>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Remaining</th>
          <th>Rate</th>
          <th>Monthly</th>
        </tr>
      </thead>
      <tbody id="loanTable"></tbody>
    </table>

    <button class="btn" onclick="goLoan()">Request New Loan</button>
    <div class="hint">Loans are calculated dynamically based on era (1940‚Äì2030) and your owned aircraft fleet.</div>
  </section>

</main>

<!-- ============================================================
     ‚è≥ TIME ENGINE
     ============================================================ -->
<script src="acs_time_recovery.js"></script>
<script src="time_engine.js"></script>

<!-- ============================================================
     üîê SECURITY CORE
     ============================================================ -->
<script src="engine/acs_security_core.js?v=1"></script>

<!-- ============================================================
     üíº FINANCE + BANK ENGINE
     (IMPORTANTE: estos dos deben existir en /engine/)
     ============================================================ -->
<script src="engine/acs_finance.js"></script>
<script src="engine/acs_bank.js"></script>

<script>
  function money(x){
    const v = Number(x || 0);
    return "$" + Math.round(v).toLocaleString();
  }

  function handleLogout(){
    alert("üëã Session closed. See you soon, Captain!");
    window.location.href = "login.html";
  }

  function goLoan(){
    window.location.href = "loan_request.html";
  }

  function loadBank(){
    if (typeof ACS_BANK_getSummary !== "function"){
      console.error("ACS_BANK_getSummary() missing ‚Äî engine/acs_bank.js not loaded.");
      return;
    }

    const s = ACS_BANK_getSummary();

    document.getElementById("year").innerText = s.year;
    document.getElementById("fleet").innerText = money(s.fleetValue);
    document.getElementById("capacity").innerText = money(s.loanCapacity);
    document.getElementById("rate").innerText = Number(s.interestRate).toFixed(2) + "%";

    const table = document.getElementById("loanTable");
    table.innerHTML = "";

    const loans = Array.isArray(s.loans) ? s.loans : [];

    if (loans.length === 0){
      table.innerHTML = `<tr><td colspan="4" style="color:#9fb3ff;">No active loans.</td></tr>`;
      return;
    }

    loans.forEach(l=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${l.id || "‚Äî"}</td>
        <td>${money(l.remaining)}</td>
        <td>${Number(l.rate || 0).toFixed(2)}%</td>
        <td>${money(l.monthlyPayment)}</td>
      `;
      table.appendChild(tr);
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    try{
      loadBank();
    }catch(e){
      console.error("BANK UI crash:", e);
    }
  });
</script>

</body>
</html>
