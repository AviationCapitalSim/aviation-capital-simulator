<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Department Control Center - Aviation Capital Simulator</title>
  <link rel="stylesheet" href="styles.css?v=3.1" />
  <style>
    /* === DEPARTMENT CONTROL CENTER (ACS) === */
    body {
      margin: 0;
      background-color: #081530;
      color: white;
      font-family: "Segoe UI", sans-serif;
    }

    h2 {
      text-align: center;
      color: #FFB300;
      margin-top: 6rem;
      margin-bottom: 0.4rem;
    }

    p.sub {
      text-align: center;
      color: #ccc;
      margin-bottom: 2rem;
    }

    .control-panel {
      max-width: 1150px;
      margin: 2rem auto;
      background: #0b1c3f;
      border-radius: 12px;
      padding: 1.5rem 2rem;
      border: 1px solid rgba(255,179,0,0.25);
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    th, td {
      padding: 0.7rem;
      text-align: left;
    }

    th {
      background-color: #102040;
      color: #FFB300;
      border-bottom: 2px solid #FFB300;
    }

    tr { border-bottom: 1px solid #FFB300; }

    .salary { color: #ff6464; font-weight: 600; }
    .staff { color: #00d17a; font-weight: 600; }
    .morale { color: #00d17a; font-weight: 600; }

    .btn {
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      margin-left: 4px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .btn-bonus { background-color: #00a86b; color: #fff; }
    .btn-bonus:hover { background-color: #007d4e; }

    .btn-hire { background-color: #007bff; color: #fff; }
    .btn-hire:hover { background-color: #005fcc; }

    .btn-adjust { background-color: #ffb300; color: #000; }
    .btn-adjust:hover { background-color: #e4a000; }

    .btn-transfer { background-color: #87b8ff; color: #000; }
    .btn-transfer:hover { background-color: #6ca0e6; }

    .btn-dismiss { background-color: #000; color: #fff; }
    .btn-dismiss:hover { background-color: #222; }

    tfoot td {
      border-top: 2px solid #FFB300;
      font-weight: bold;
      text-align: right;
      padding-top: 1rem;
      color: #00E0FF; /* nuevo color */
    }

    /* === DISABLED BONUS BUTTON === */
    .btn-disabled {
      opacity: 0.35;
      filter: grayscale(100%);
      cursor: not-allowed !important;
      pointer-events: none !important;
    }

    .btn-disabled:hover {
      background: inherit !important;
    }

    /* Tooltip Coming Soon */
    .btn[data-tip] {
      position: relative;
    }

    .btn[data-tip]:hover::after {
      content: attr(data-tip);
      position: absolute;
      background: #111;
      color: #FFB300;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.75rem;
      top: -32px;
      right: 0;
      white-space: nowrap;
      border: 1px solid #FFB300;
      z-index: 10;
    }

    /* Reloj cockpit */
    .acs-clock-header {
      font-family: 'Orbitron', 'Consolas', monospace;
      color: #00ff80;
      font-weight: bold;
      background: rgba(0, 255, 128, 0.08);
      padding: 0.3rem 0.8rem;
      border-radius: 6px;
      font-size: 0.9rem;
      margin-left: 1rem;
    }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header class="acs-header">
    <div class="acs-logo">
      <img src="acs_logo.png" alt="ACS Logo" />
      <h1>Aviation Capital Simulator</h1>
    </div>

    <nav class="acs-nav">
      <a href="dashboard.html">Main</a>
      <a href="finance.html">Finance</a>
      <a href="aircraft.html">Aircraft</a>
      <a href="routes.html">Routes</a>
      <a href="market.html">Market</a>
      <a href="hr.html" class="active">HR</a>
      <a href="forum.html">Forum</a>
      <a href="profile.html">Profile</a>
      <a href="support.html">Support</a>
    </nav>

    <div class="acs-auth">
      <a href="#" class="logout-btn" onclick="handleLogout()">Logout</a>
    </div>

    <div class="acs-clock-header" id="acs-clock">00:00 ‚Äî 01 JAN 2025</div>
  </header>

  <!-- ===== MAIN ===== -->
  <main class="acs-main">
    <h2>üè¢ Department Control Center</h2>
    <p class="sub">Manage all departments, staff, salaries, morale and workforce actions.</p>

    <section class="control-panel">
      <table id="deptTable">
        <thead>
          <tr>
            <th>Department</th>
            <th>Staff</th>
            <th>Salary</th>
            <th>Morale</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="departmentRows"></tbody>
        <tfoot>
          <tr>
            <td colspan="5" id="totalPayroll">Total Monthly Payroll: $0</td>
          </tr>
        </tfoot>
      </table>
    </section>
  </main>

  <!-- ===== MODALS =====  (NO CAMBIADOS) ===== -->
  <div class="acs-modal" id="bonusModal"></div>
  <div class="acs-modal" id="hireModal"></div>
  <div class="acs-modal" id="salaryModal"></div>
  <div class="acs-modal" id="dismissModal"></div>

  <footer class="acs-footer">
    <p>¬© 2025 Aviation Capital Simulator. All rights reserved.</p>
  </footer>

  <!-- ===== SCRIPT ===== -->
  <script>
    const departments = [
      "CEO",
      "Vice President",
      "Middle Level Management",
      "Economics and Finance",
      "Corporate Communications",
      "Human Resources",
      "Quality Department",
      "Safety and Security",
      "Customer Services",
      "Flight Operations Division",
      "Technical Services and Maintenance",
      "Ground Handling",
      "Route Strategies Department",
      "Pilots (Small A/C)",
      "Pilots (Medium A/C)",
      "Pilots (Large A/C)",
      "Pilots (Very Large A/C)",
      "Cabin Crew"
    ];

    const initialStaff = [1,0,1,1,0,1,1,0,0,1,0,0,1,0,0,0,0,0];

    const sysSalary = {
      CEO: 90,
      VP: 70,
      finance_admin: 55,
      flight_ops: 75,
      ground: 25,
      maintenance: 70,
      pilots: 120,
      copilots: 90,
      cabin: 45
    };

    const deptTable = document.getElementById("departmentRows");

    departments.forEach((dept, i) => {
      const staff = initialStaff[i];
      const salary = 50; // placeholder, luego mapeable real
      const morale = 100;

      let actions = "";

      if (dept === "CEO") {
        actions = `<em style="color:#aaa;">No actions available</em>`;
      } else {
        actions = `
          <button class="btn btn-bonus btn-disabled" data-tip="Bonus disabled">üíµ</button>
          <button class="btn btn-hire" onclick="dummy()">üßç</button>
          <button class="btn btn-adjust" onclick="dummy()">üìà</button>
          <button class="btn btn-transfer" onclick="dummy()">üîÅ</button>
          <button class="btn btn-dismiss" onclick="dummy()">‚ùå</button>
        `;
      }

      deptTable.innerHTML += `
        <tr>
          <td>${dept}</td>
          <td class="staff">${staff}</td>
          <td class="salary">$${salary}</td>
          <td class="morale">${morale}%</td>
          <td>${actions}</td>
        </tr>
      `;
    });

    function dummy(){
      alert("Feature under development.");
    }

    function calculatePayroll(){
      let total = 0;
      document.querySelectorAll(".salary").forEach(s => {
        const v = parseFloat(s.textContent.replace("$",""));
        total += v;
      });
      document.getElementById("totalPayroll").textContent =
        "Total Monthly Payroll: $" + total.toLocaleString();
    }

    window.addEventListener("DOMContentLoaded", calculatePayroll);

    function handleLogout(){
      alert("üëã Session closed. See you soon, Captain!");
      window.location.href="login.html";
    }
  </script>

  <script src="time_engine.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (typeof registerTimeListener==="function") {
        registerTimeListener(updateClockDisplay);
        updateClockDisplay();
      }
    });
  </script>

</body>
</html>
