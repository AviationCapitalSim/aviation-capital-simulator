<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Department Control Center - Aviation Capital Simulator</title>
  <link rel="stylesheet" href="styles.css?v=3.1" />
  <style>
    body {
      margin: 0;
      background-color: #081530;
      color: white;
      font-family: "Segoe UI", sans-serif;
    }

    h2 { text-align: center; color: #FFB300; margin-top: 2rem; }
    p.sub { text-align: center; color: #ccc; margin-bottom: 2rem; }

    .control-panel {
      max-width: 1150px; margin: 2rem auto; background: #0b1c3f;
      border-radius: 12px; padding: 1.5rem 2rem;
      border: 1px solid rgba(255,179,0,0.25); box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { padding: 0.7rem; text-align: left; }
    th { background-color: #102040; color: #FFB300; border-bottom: 2px solid #FFB300; }
    tr { border-bottom: 1px solid #FFB300; }

    .salary { color: #ff6464; font-weight: 600; }
    .staff, .morale { color: #00d17a; font-weight: 600; }

    .btn { border: none; border-radius: 6px; padding: 6px 10px; margin-left: 4px; font-weight: 600; cursor: pointer; transition: background 0.2s ease; }
    .btn-bonus { background-color: #00a86b; color: #fff; }
    .btn-hire { background-color: #007bff; color: #fff; }
    .btn-adjust { background-color: #ffb300; color: #000; }
    .btn-dismiss { background-color: #000; color: #fff; }
    .btn:hover { opacity: 0.85; }

    tfoot td { border-top: 2px solid #FFB300; font-weight: bold; text-align: right; padding-top: 1rem; color: #FFB300; }

    /* === MODALS === */
    .acs-modal, .acs-confirm-overlay {
      display: none; position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; background: rgba(0,0,0,0.7);
      align-items: center; justify-content: center; z-index: 2000;
    }
    .acs-modal-content, .acs-confirm-content {
      background: #0b1c3f; border: 1px solid #FFB300; border-radius: 12px;
      padding: 1.5rem 2rem; text-align: center; width: 400px;
      box-shadow: 0 0 15px rgba(255,179,0,0.4);
    }
    .close-modal { background: none; border: none; color: #aaa; font-size: 1.2rem; cursor: pointer; position: absolute; top: 10px; right: 20px; }
    .modal-btn { background-color: #00a86b; color: #fff; border: none; border-radius: 6px; padding: 8px 16px; font-weight: 600; cursor: pointer; margin-top: 1rem; }
    .modal-btn.cancel { background-color: #ff6464; }

    /* Toast */
    #acs-toast { display:none; position:fixed; bottom:20px; right:20px; background:#102040; color:#fff; border:1px solid #FFB300; padding:10px 18px; border-radius:8px; box-shadow:0 0 10px rgba(255,179,0,0.4); z-index:3000; }
  </style>
</head>
<body>
  <header class="acs-header">
    <div class="acs-logo"><img src="acs_logo.png" alt="ACS Logo" /><h1>Aviation Capital Simulator</h1></div>
    <nav class="acs-nav">
      <a href="dashboard.html">Main</a><a href="finance.html">Finance</a><a href="aircraft.html">Aircraft</a><a href="hr.html">HR</a><a href="#" class="active">Department</a><a href="#" onclick="handleLogout()">Logout</a>
    </nav>
  </header>

  <main class="acs-main">
    <h2>üè¢ Department Control Center</h2>
    <p class="sub">Manage departments, staff, salaries, morale and actions.</p>
    <section class="control-panel">
      <table id="deptTable">
        <thead><tr><th>Department</th><th>Staff</th><th>Salary</th><th>Morale</th><th>Actions</th></tr></thead>
        <tbody id="departmentRows"></tbody>
        <tfoot><tr><td colspan="5" id="totalPayroll">Total Monthly Payroll: $0</td></tr></tfoot>
      </table>
    </section>
  </main>

  <!-- MODALS (Hire example) -->
  <div class="acs-modal" id="hireModal">
    <div class="acs-modal-content">
      <button class="close-modal" onclick="closeModal('hireModal')">‚úñ</button>
      <h3>Hire New Staff</h3>
      <p id="hireDeptName">Department</p>
      <input type="number" id="hireCount" min="1" max="200" value="1">
      <button class="modal-btn" onclick="confirmOverlay('hire')">Confirm</button>
    </div>
  </div>

  <!-- Overlay Confirmation -->
  <div class="acs-confirm-overlay" id="confirmOverlay">
    <div class="acs-confirm-content">
      <h3 id="confirmTitle">Are you sure?</h3>
      <p id="confirmMsg">This action will apply changes to your staff records.</p>
      <button class="modal-btn" onclick="executeAction()">Confirm</button>
      <button class="modal-btn cancel" onclick="closeConfirm()">Cancel</button>
    </div>
  </div>

  <div id="acs-toast"></div>

  <footer class="acs-footer"><p>¬© 2025 Aviation Capital Simulator</p></footer>

  <script>
    const departments = ["Human Resources", "Flight Operations", "Maintenance", "Cabin Crew", "Ground Handling"];
    const deptData = {};
    departments.forEach(d => deptData[d] = {staff:40, salary:3000, morale:100});

    const tbody = document.getElementById('departmentRows');
    departments.forEach(dep => {
      tbody.innerHTML += `<tr><td>${dep}</td><td class='staff'>${deptData[dep].staff}</td><td class='salary'>$${deptData[dep].salary}</td><td class='morale'>${deptData[dep].morale}%</td><td><button class='btn btn-hire' onclick="openHire('${dep}')">üßç</button></td></tr>`;
    });

    function openHire(dep){ document.getElementById('hireDeptName').textContent = dep; openModal('hireModal'); }
    function openModal(id){ document.getElementById(id).style.display='flex'; }
    function closeModal(id){ document.getElementById(id).style.display='none'; }

    let pendingAction=null, pendingDept=null;
    function confirmOverlay(type){ pendingAction=type; pendingDept=document.getElementById('hireDeptName').textContent; closeModal('hireModal'); openConfirm(); }

    function openConfirm(){ document.getElementById('confirmOverlay').style.display='flex'; }
    function closeConfirm(){ document.getElementById('confirmOverlay').style.display='none'; }

    function executeAction(){
      closeConfirm();
      if(pendingAction==='hire'){
        const count=parseInt(document.getElementById('hireCount').value)||0;
        deptData[pendingDept].staff += count;
        deptData[pendingDept].morale = Math.min(100, deptData[pendingDept].morale + 2);
        updateTable();
        showToast(`‚úÖ ${count} new staff added to ${pendingDept}`);
      }
    }

    function updateTable(){
      let total=0;
      tbody.innerHTML='';
      departments.forEach(dep=>{
        const d=deptData[dep];
        total += d.staff * d.salary;
        tbody.innerHTML += `<tr><td>${dep}</td><td class='staff'>${d.staff}</td><td class='salary'>$${d.salary}</td><td class='morale'>${d.morale}%</td><td><button class='btn btn-hire' onclick=\"openHire('${dep}')\">üßç</button></td></tr>`;
      });
      document.getElementById('totalPayroll').innerHTML = `Total Monthly Payroll: $<span>${total.toLocaleString()}</span>`;
    }

    function showToast(msg){
      const t=document.getElementById('acs-toast');
      t.textContent=msg; t.style.display='block';
      setTimeout(()=>{t.style.display='none';},2500);
    }
  </script>
</body>
</html>
