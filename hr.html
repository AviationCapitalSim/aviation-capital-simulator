<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Human Resources - Aviation Capital Simulator</title>
  <link rel="stylesheet" href="styles.css?v=3.1" />
  <style>
    /* === HR MODULE (ACS Unified Dashboard Design) === */
    body {
      margin: 0;
      background-color: #081530;
      color: white;
      font-family: "Segoe UI", sans-serif;
    }

    h2 {
      text-align: center;
      color: #FFB300;
      margin-top: 6rem;
      margin-bottom: 0.4rem;
    }

    p.sub {
      text-align: center;
      color: #ccc;
      margin-bottom: 2rem;
    }

    .finance-panels {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
      padding: 0 1.5rem 3rem;
    }

    .panel {
      background: #0b1c3f;
      border-radius: 12px;
      padding: 1.2rem 1.5rem;
      border: 1px solid rgba(255,179,0,0.25);
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      transition: transform 0.2s ease;
    }

    .panel:hover { transform: scale(1.02); }

    .panel h3 {
      color: #FFB300;
      margin-bottom: 0.8rem;
    }

    .salary { color: #ff6464; font-weight: 600; }
    .staff { color: #00d17a; font-weight: 600; }
    .morale { font-weight: 600; color: #00d17a; }

    .acs-btn {
      background-color: #00a86b;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 14px;
      margin-top: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .acs-btn:hover { background-color: #007d4e; }

    /* === BONUS MODAL === */
    #bonusModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    #bonusModalContent {
      background: #0b1c3f;
      border: 1px solid #FFB300;
      border-radius: 12px;
      padding: 1.5rem 2rem;
      text-align: center;
      width: 350px;
      box-shadow: 0 0 15px rgba(255,179,0,0.4);
      position: relative;
    }

    #bonusModal h3 { color: #FFB300; margin-bottom: 1rem; }
    #bonusModal input[type="range"] { width: 80%; margin: 1rem 0; }

    .close-modal {
      background: none;
      border: none;
      color: #aaa;
      font-size: 1.2rem;
      cursor: pointer;
      position: absolute;
      top: 10px;
      right: 20px;
    }

    /* Clock */
    .acs-clock-header {
      font-family: 'Orbitron', 'Consolas', monospace;
      color: #00ff80;
      font-weight: bold;
      background: rgba(0, 255, 128, 0.08);
      padding: 0.3rem 0.8rem;
      border-radius: 6px;
      font-size: 0.9rem;
      margin-left: 1rem;
    }
    /* === INACTIVE PANELS (COMING SOON) === */
.inactive-panel {
  opacity: 0.45;               /* gris√°ceo */
  filter: grayscale(100%);
  pointer-events: none;        /* no interactivo */
  position: relative;
}

.inactive-btn {
  background: #444 !important;
  color: #ccc !important;
  border: 1px solid #666 !important;
  cursor: not-allowed !important;
}
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header class="acs-header">
    <div class="acs-logo">
      <img src="acs_logo.png" alt="ACS Logo" />
      <h1>Aviation Capital Simulator</h1>
    </div>

    <nav class="acs-nav">
      <a href="dashboard.html">Main</a>
      <a href="finance.html">Finance</a>
      <a href="aircraft.html">Aircraft</a>
      <a href="routes.html">Routes</a>
      <a href="hr.html" class="active">HR</a>
      <a href="forum.html">Forum</a>
      <a href="support.html">Support</a>
    </nav>

    <div class="acs-auth">
      <a href="#" class="logout-btn" onclick="handleLogout()">Logout</a>
    </div>

    <div class="acs-clock-header" id="acs-clock">00:00 ‚Äî 01 JAN 2025</div>
  </header>

  <!-- ===== MAIN ===== -->
  <main class="acs-main">
    <h2>üë• Human Resources Department</h2>
    <p class="sub">Manage all staff, morale, payroll and bonuses across the company.</p>

    <section class="finance-panels">
      <div class="panel">
        <h3>üìä HR Overview</h3>
        <p>Total Staff: <strong id="totalStaff">‚Äî</strong></p>
        <p>Total Payroll: <strong id="totalPayroll">‚Äî</strong></p>
        <p>Average Morale: <strong id="avgMorale">‚Äî</strong></p>
        <p>Staff Coverage: <strong id="coverage">‚Äî</strong></p>
      </div>

      <div class="panel">
        <h3>üßë‚Äçüíº Department Control</h3>
        <p>Total Departments: <strong>7</strong></p>
        <p>Total Staff: <strong id="totalStaff2">‚Äî</strong></p>
        <p>Average Morale: <strong id="avgMorale2">‚Äî</strong></p>
        <p>Monthly Payroll: <strong id="monthlyPayroll">‚Äî</strong></p>
        <br />
        <button class="acs-btn" onclick="window.location.href='department_control.html'">
          üè¢ Open Department Control Center
        </button>
      </div>

      <!-- === üí∞ Payroll & Bonuses (INACTIVE VERSION) === -->
<div class="panel inactive-panel">
  <h3>üí∞ Payroll & Bonuses</h3>
  <p>This Month Payroll: <strong>‚Äî</strong></p>
  <p>Bonuses Applied: <strong>$0</strong></p>
  <p>Expense Share: <strong>‚Äî</strong></p>
  <button class="acs-btn inactive-btn" disabled>Coming Soon</button>
</div>

<!-- === ‚úàÔ∏è Operational Impact (INACTIVE VERSION) === -->
<div class="panel inactive-panel">
  <h3>‚úàÔ∏è Operational Impact</h3>
  <p>Flight Efficiency: <strong>‚Äî</strong></p>
  <p>Delay Risk: <strong>None</strong></p>
  <p>Maintenance Reliability: <strong>‚Äî</strong></p>
  <p style="margin-top:1rem;color:#aaa;font-style:italic;text-align:center;">
    Coming Soon
  </p>
</div>

    </section>
  </main>

  <!-- ===== BONUS MODAL ===== -->
  <div id="bonusModal">
    <div id="bonusModalContent">
      <button class="close-modal" onclick="closeBonusModal()">‚úñ</button>
      <h3>Assign Bonus</h3>
      <p id="bonusDeptName">Department</p>
      <input type="range" min="20" max="100" step="10" value="20" id="bonusRange">
      <p>Bonus: <span id="bonusValue">20%</span></p>
      <p>Estimated Cost: <span id="bonusCost">0</span> USD</p>
      <button class="acs-btn" onclick="confirmBonus()">Confirm</button>
    </div>
  </div>

  <!-- ===== FOOTER ===== -->
  <footer class="acs-footer">
    <p>¬© 2025 Aviation Capital Simulator. All rights reserved.</p>
  </footer>

  <!-- ===== SCRIPT ===== -->
  <script>
    /*****************************************************
     *  Cargamos ACS_HR desde localStorage
     *****************************************************/
    const HR = JSON.parse(localStorage.getItem("ACS_HR") || "{}");
    const Finance = JSON.parse(localStorage.getItem("ACS_Finance") || "{}");

    /*****************************************************
     *  Departamentos profesionales (SIN AVIONES)
     *****************************************************/
    const departments = {
      management: {
        name: "High Level Management",
        staff: HR.staff ? HR.staff.admin : 0,
        morale: HR.morale ? HR.morale.admin : 100,
        salary: HR.salaries ? HR.salaries.admin : 55
      },
      admin: {
        name: "Finance & Administration",
        staff: HR.staff ? HR.staff.admin : 0,
        morale: HR.morale ? HR.morale.admin : 100,
        salary: HR.salaries ? HR.salaries.admin : 55
      },
      operations: {
        name: "Operations (Dispatch)",
        staff: HR.staff ? HR.staff.operations_basic : 0,
        morale: HR.morale ? HR.morale.operations_basic : 100,
        salary: HR.salaries ? HR.salaries.operations_basic : 85
      },
      flightcrew: {
        name: "Flight Crew",
        staff: HR.staff ? HR.staff.pilots + HR.staff.copilots : 0,
        morale: HR.morale ? HR.morale.pilots : 100,
        salary: HR.salaries ? HR.salaries.pilot : 120
      },
      cabin: {
        name: "Cabin Crew",
        staff: HR.staff ? HR.staff.cabin : 0,
        morale: HR.morale ? HR.morale.cabin : 100,
        salary: HR.salaries ? HR.salaries.cabin : 45
      },
      maintenance: {
        name: "Maintenance",
        staff: HR.staff ? HR.staff.mechanics : 0,
        morale: HR.morale ? HR.morale.mechanics : 100,
        salary: HR.salaries ? HR.salaries.mechanic : 70
      },
      ground: {
        name: "Ground Handling",
        staff: HR.staff ? HR.staff.ground : 0,
        morale: HR.morale ? HR.morale.ground : 100,
        salary: HR.salaries ? HR.salaries.ground : 25
      }
    };

    /*****************************************************
     *  Calcular totales reales
     *****************************************************/
    const totalStaff =
      HR.staff.admin +
      HR.staff.operations_basic +
      HR.staff.pilots +
      HR.staff.copilots +
      HR.staff.cabin +
      HR.staff.mechanics +
      HR.staff.ground;

    const avgMorale = HR.avgMorale || 100;
    const payroll = HR.payroll || 0;

    /*****************************************************
     *  Pintar en la UI
     *****************************************************/
    document.getElementById("totalStaff").textContent = totalStaff;
    document.getElementById("totalStaff2").textContent = totalStaff;

    document.getElementById("totalPayroll").textContent = `$${payroll.toLocaleString()} / month`;
    document.getElementById("monthlyPayroll").textContent = `$${payroll.toLocaleString()}`;
    document.getElementById("payrollTotal").textContent = `$${payroll.toLocaleString()}`;

    document.getElementById("avgMorale").textContent = `${avgMorale}%`;
    document.getElementById("avgMorale2").textContent = `${avgMorale}%`;

    document.getElementById("coverage").textContent = "100%";
    document.getElementById("expenseShare").textContent =
      Finance.expenses > 0 ? `${Math.round((payroll / Finance.expenses) * 100)}%` : "100%";

    document.getElementById("efficiency").textContent = "‚Äî";
    document.getElementById("delayRisk").textContent = "None";
    document.getElementById("reliability").textContent = "‚Äî";

    /*****************************************************
     * BONUS MODAL (funcional)
     *****************************************************/
    let currentDept = null;

    function openBonusModal(deptKey) {
      currentDept = deptKey;
      const modal = document.getElementById("bonusModal");
      const range = document.getElementById("bonusRange");

      range.value = 20;
      updateBonusCost();

      document.getElementById("bonusDeptName").textContent =
        departments[deptKey].name;

      modal.style.display = "flex";
    }

    document.getElementById("bonusRange").addEventListener("input", updateBonusCost);

    function updateBonusCost() {
      const percent = parseInt(document.getElementById("bonusRange").value);
      const d = departments[currentDept];
      const cost = d.salary * d.staff * (percent / 100);

      document.getElementById("bonusValue").textContent = percent + "%";
      document.getElementById("bonusCost").textContent = cost.toLocaleString();
    }

    function confirmBonus() {
      const percent = parseInt(document.getElementById("bonusRange").value);
      const d = departments[currentDept];
      const cost = d.salary * d.staff * (percent / 100);

      d.morale = Math.min(100, d.morale + (percent / 5));

      alert(`${d.name} morale increased to ${d.morale}%`);
      closeBonusModal();
    }

    function closeBonusModal() {
      document.getElementById("bonusModal").style.display = "none";
    }

    function resetBonuses() {
      document.getElementById("bonusTotal").textContent = "$0";
      alert("Bonus records reset.");
    }

    function handleLogout() {
      alert("üëã Session closed. See you soon, Captain!");
      window.location.href = "login.html";
    }
  </script>

  <!-- GLOBAL CLOCK -->
  <script src="time_engine.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (typeof registerTimeListener === "function") {
        registerTimeListener(updateClockDisplay);
        updateClockDisplay();
      }
    });
  </script>

</body>
</html>
