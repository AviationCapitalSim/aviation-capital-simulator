<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>ACS_Skytrack - Aviation Capital Simulator</title>

<!-- ======== ACS Styles ======== -->
  <link rel="stylesheet" href="styles.css?v=3.1" />

  <!-- ======== ACS Favicons (16 / 32 / 64) ======== -->
  <link rel="icon" type="image/png" sizes="16x16" href="acs_logo_16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="acs_logo_32.png">
  <link rel="icon" type="image/png" sizes="64x64" href="acs_logo_64.png">

  <!-- ======== Apple iPhone/iPad Home Screen Icon ======== -->
  <link rel="apple-touch-icon" href="acs_logo_180.png">

  <!-- ======== PWA Manifest ======== -->
  <link rel="manifest" href="manifest.json">


<style>
/* ============================================================
     === ACS Qatar Luxury Dashboard â€” Visual Redesign ===========
   ============================================================ */

body {
  margin: 0;
  background-color: #081530;
  color: white;
  font-family: "Poppins", sans-serif;
}

/* ============================================================
     === GLOBAL HEADER (Exact Copy from index.html) ============
   ============================================================ */

.acs-header {
  position: fixed;
  top: 0;
  width: 100%;
  backdrop-filter: blur(9px);
  background: rgba(12,23,50,0.45);
  padding: 0.8rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 2px solid #ffb300;
  z-index: 5000;
}

.acs-left {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.acs-left img {
  height: 46px;
}

.acs-left h1 {
  font-size: 1.15rem;
  margin: 0;
  color: #ffb300;
  letter-spacing: 0.5px;
}

.acs-nav {
  flex: 1;
  display: flex;
  justify-content: center;
  gap: 2rem;
}

/* ============================================================
   === NAVIGATION â€” QATAR PEARL GLOW STYLE =====================
   ============================================================ */

.acs-nav a {
  position: relative;
  font-size: 1rem;
  letter-spacing: 0.4px;
  color: #dbe4ff; 
  text-decoration: none;
  transition: 0.25s ease;
  padding-bottom: 6px;
}

.acs-nav a:hover,
.acs-nav a.active {
  color: #ffca3a;
  text-shadow: 0 0 6px rgba(255,179,0,0.45);
}

.acs-nav a.active::after,
.acs-nav a:hover::after {
  content: "";
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 100%;
  height: 2px;
  background: linear-gradient(to right, #ffb300, #ffe7a0);
  border-radius: 2px;
  box-shadow: 0 0 8px rgba(255,200,60,0.45);
}

/* ðŸŸ¢ 1.3 ACS RIGHT HEADER â€” Support / Logout / Clock */
  
.acs-right {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.logout-btn {
  padding: 0.45rem 1.1rem;
  border: 1px solid #ffb300;
  border-radius: 12px;
  background: rgba(255,179,0,0.05);
  color: #ffb300;
  font-weight: 600;
  cursor: pointer;
  text-decoration: none;
}

.logout-btn:hover {
  background: #ffb300;
  color: #0c1f3c;
}

.acs-clock-header {
  font-family: "Orbitron", monospace;
  padding: 0.4rem 0.8rem;
  background: rgba(0,255,128,0.08);
  border-radius: 8px;
  font-size: 0.95rem;
  color: #00ff80;
}

/* SUPPORT BUTTON â€” Qatar Luxury */
.support-btn {
  padding: 0.45rem 1.1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  color: #8AB4FF;
  border: 1px solid rgba(138,180,255,0.45);
  background: rgba(138,180,255,0.08);
  backdrop-filter: blur(6px);
  transition: 0.25s ease;
}

.support-btn:hover {
  background: rgba(138,180,255,0.20);
  box-shadow: 0 0 14px rgba(138,180,255,0.55);
  color: #dfe9ff;
}
  
/* ============================================================
     === MAIN CONTENT ==========================================
   ============================================================ */

.acs-main {
  padding: 70px 2rem 70px;
  text-align: center;
}

.acs-main .sub {
  margin-top: -0.4rem;
  color: #cbd6ff;
  font-size: 1rem;
}

/* ============================================================
     === PREMIUM PANEL GRID ====================================
   ============================================================ */

.dashboard-grid {
  display: grid;
  gap: 2rem;
  margin-top: 4rem;
}

.row-business {
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
}

.row-operations {
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
}

.row-capital {
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

/* ============================================================
     === PANEL ==================================================
   ============================================================ */

.panel {
  background: linear-gradient(180deg, rgba(20,35,70,0.75), rgba(10,18,40,0.85));
  padding: 1.6rem 1.5rem;
  border-radius: 22px;
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
  transition: 0.25s;
  border: 1px solid rgba(255,179,0,0.15);
}

.panel:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 32px rgba(255,179,0,0.25);
  border: 1px solid rgba(255,179,0,0.35);
}

.panel h3 {
  font-size: 1.25rem;
  color: #ffb300;
  margin-bottom: 0.9rem;
  text-shadow: 0 0 6px rgba(255,179,0,0.4);
}

.panel p {
  color: #d7e2ff;
  font-size: 0.95rem;
  line-height: 1.4;
}

.alert-list,
.aircraft-list {
  list-style: none;
  padding: 0;
}

.alert-list li {
  color: #ff9b00;
}

.acs-btn {
  margin-top: 1rem;
  background: #00a86b;
  border: none;
  padding: 0.7rem 1.1rem;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  transition: 0.25s;
  color: white;
}

.acs-btn:hover {
  background: #00794f;
}

.acs-footer {
  text-align: center;
  padding: 20px;
  margin-top: 50px;
  color: #7c8bb8;
  font-size: 0.9rem;
}

/* ============================================================
   === WELCOME CHIPS â€” Qatar Luxury (TamaÃ±o unificado) ========
   ============================================================ */

.welcome-badges {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 22px;
  margin-bottom: 28px;
  gap: 26px;
}

/* ðŸ‘‰ Todos con el MISMO tamaÃ±o (clonado del Base),
      pero Rank y PaÃ­s conservan su recuadro dorado original */
.welcome-chip {
  padding: 5px 18px;          /* mÃ¡s grande que el original */
  font-size: 0.90rem;         /* texto un poco mÃ¡s grande */
  border-radius: 12px;
  background: rgba(255,179,0,0.12);       /* recuadro dorado original */
  border: 1px solid rgba(255,179,0,0.35); /* recuadro dorado original */
  color: #ffffff;
  display: flex;
  align-items: center;
  gap: 8px;
  backdrop-filter: blur(4px);
  box-shadow: 0 0 6px rgba(0,0,0,0.35);
  height: 28px;
  line-height: 28px;
}

/* CHIP BASE â€” Azul Qatar Royal */
.welcome-chip.base-chip {
  background: rgba(0, 102, 204, 0.20);
  border: 1px solid rgba(0, 135, 255, 0.50);
  color: #3aaaff;
}
  
/* ============================================================
   === HERO TITLE â€” Qatar Luxury Premium v2.3 (Balanceado) ====
   ============================================================ */

#welcomeMessage {
  font-size: 2.2rem;               /* tamaÃ±o reducido */
  font-weight: 700;
  margin-bottom: 0.3rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  text-align: center;
}

#welcomeMessage .w-welcome {
  background: linear-gradient(90deg, #ffe7a0, #ffb300, #ffd75a);
  -webkit-background-clip: text;
  color: transparent;
  text-shadow: 0 0 14px rgba(255,190,60,0.35);
}

#welcomeMessage .w-airline {
  color: #ffffff;
  text-shadow: 0 0 12px rgba(255,255,255,0.25);
}

  
</style>
</head>

<body>
<body>

<!-- ============================================================
     === GLOBAL HEADER â€” QATAR LUXURY (EXACT HR COPY) ===========
     ============================================================ -->

<header class="acs-header">
  <div class="acs-left">
    <img src="acs_logo.png" alt="ACS Logo">
    <h1>Aviation Capital Simulator</h1>
  </div>

  <nav class="acs-nav">
    <a href="dashboard.html">Main</a>
    <a href="finance.html">Bank</a>
    <a href="aircraft.html">Aircraft</a>
    <a href="routes.html">Routes</a>
    <a href="skytrack.html" class="active">SkyTrack</a>
    <a href="forum.html">Forum</a>
  </nav>

  <div class="acs-right">
    <a href="support.html" class="support-btn">Support</a>
    <a class="logout-btn" onclick="handleLogout()">Logout</a>
    <div class="acs-clock-header" id="acs-clock">00:00 â€” 01 JAN 1940</div>
  </div>
</header>

<!-- ============================================================
     === SKYTRACK MAP AREA =====================================
     ============================================================ -->

<main class="acs-main" style="padding:105px 0 0;">
  <div id="map" style="height:calc(100vh - 105px); width:100%;"></div>
</main>

</body>

<script>
/* ============================================================
   ðŸŸ¦ SKYTRACK v1 â€” CLEAN SCHEDULE (TEST DATA)
   ============================================================ */

const SKYTRACK_SCHEDULE = [
  {
    flightNumber: "WM101",
    model: "DC-3",
    registration: "EC-FDF",
    origin: "LEMD",
    destination: "LEBL",
    depMin: 600,   // 10:00
    arrMin: 780    // 13:00
  },
  {
    flightNumber: "WM102",
    model: "DC-5",
    registration: "EC-ZPF",
    origin: "LEBL",
    destination: "LEMD",
    depMin: 840,   // 14:00
    arrMin: 1020   // 17:00
  }
];

/* ============================================================
   ðŸŒ AIRPORT DATABASE (MINIMAL)
   ============================================================ */

const AIRPORTS = {
  LEMD: { lat: 40.4722, lng: -3.5608, name: "Madrid" },
  LEBL: { lat: 41.2974, lng: 2.0833,  name: "Barcelona" }
};

/* ============================================================
   â± TIME (REAL CLOCK â€” SIMPLE)
   ============================================================ */

function getNowMin() {
  const d = new Date();
  return d.getHours() * 60 + d.getMinutes();
}

/* ============================================================
   âœˆï¸ RUNTIME v1 â€” MINIMAL
   ============================================================ */

function buildLiveFlights() {

  const nowMin = getNowMin();
  const flights = [];

  SKYTRACK_SCHEDULE.forEach(f => {

    const o = AIRPORTS[f.origin];
    const d = AIRPORTS[f.destination];
    if (!o || !d) return;

    let status = "GROUND";
    let lat = o.lat;
    let lng = o.lng;

    // ventana normal
    if (f.depMin <= f.arrMin && nowMin >= f.depMin && nowMin <= f.arrMin) {
      status = "AIRBORNE";
    }

    // cruce medianoche (por si acaso)
    if (f.depMin > f.arrMin && (nowMin >= f.depMin || nowMin <= f.arrMin)) {
      status = "AIRBORNE";
    }

    if (status === "AIRBORNE") {
      const total = f.arrMin - f.depMin;
      const elapsed = Math.min(Math.max(nowMin - f.depMin, 0), total);
      const p = elapsed / total;

      lat = o.lat + (d.lat - o.lat) * p;
      lng = o.lng + (d.lng - o.lng) * p;
    }

    if (nowMin > f.arrMin) {
      lat = d.lat;
      lng = d.lng;
    }

    flights.push({
      flightNumber: f.flightNumber,
      model: f.model,
      registration: f.registration,
      origin: f.origin,
      destination: f.destination,
      lat,
      lng,
      status
    });
  });

  return flights;
}

/* ============================================================
   ðŸ—º MAP
   ============================================================ */

const map = L.map("map").setView([41, 2], 6);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "&copy; OpenStreetMap"
}).addTo(map);

const markers = {};

/* ============================================================
   ðŸ”„ RENDER LOOP
   ============================================================ */

function render() {

  const flights = buildLiveFlights();

  flights.forEach(f => {

    if (!markers[f.flightNumber]) {
      markers[f.flightNumber] = L.marker([f.lat, f.lng]).addTo(map);
    }

    markers[f.flightNumber].setLatLng([f.lat, f.lng]);

    markers[f.flightNumber].bindPopup(`
      <div class="popup">
        <b>${f.flightNumber}</b><br>
        ${f.model} Â· ${f.registration}<br>
        ${f.origin} â†’ ${f.destination}<br>
        Status: ${f.status}
      </div>
    `);
  });
}

render();
setInterval(render, 60000);
</script>
</body>
</html>
