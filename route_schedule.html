<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route Schedule - Aviation Capital Simulator</title>
  <link rel="stylesheet" href="styles.css?v=3.1" />
  <style>
    /* === ROUTE SCHEDULE PAGE (ACS Clean 2) === */
    body {
      background-color:#081530;
      color:white;
      font-family:"Segoe UI",sans-serif;
      margin:0;
    }

    h2 {
      color:#FFB300;
      margin-top:6rem; /* âœ… header fijo */
      text-align:center;
    }

    .sub {
      color:#ccc;
      text-align:center;
      margin-bottom:2rem;
    }

    .schedule-container {
      width:90%; max-width:800px;
      margin:0 auto;
      background:#0e1b3c;
      border-radius:10px;
      padding:1.5rem 2rem;
      box-shadow:0 0 10px rgba(0,0,0,0.4);
    }

    label { display:block; margin-top:1rem; font-weight:600; color:#FFB300; }

    select, input {
      width:100%;
      padding:0.5rem;
      margin-top:0.3rem;
      border-radius:6px;
      border:none;
      background:#12224c;
      color:white;
      font-size:1rem;
      outline:none;
    }

    input[type="checkbox"] {
      appearance:none;
      width:18px; height:18px;
      border-radius:4px;
      border:2px solid #3a4a7a;
      background-color:#1e2b55;
      cursor:pointer;
      position:relative;
      transition:all 0.2s ease;
    }

    input[type="checkbox"]:hover { border-color:#2196F3; box-shadow:0 0 6px #2196F3; }
    input[type="checkbox"]:checked { background-color:#2196F3; border-color:#2196F3; }
    input[type="checkbox"]:checked::after {
      content:"âœ”"; color:white; position:absolute; top:-2px; left:3px; font-size:0.9rem;
    }

    .divider { border:none; height:1px; background:rgba(255,179,0,0.6); margin:0.8rem 0 1.2rem; }

    .days-row {
      display:flex; justify-content:center; align-items:center; gap:12px;
      flex-wrap:wrap; margin-top:0.8rem;
    }

    .days-row label { display:flex; align-items:center; gap:6px; color:#ddd; font-size:0.95rem; }

    .options-center { text-align:center; margin-top:0.5rem; }

    .tech-list {
      margin-top:1.5rem;
      background:#102040;
      border-radius:8px;
      padding:1rem;
    }

    .tech-item {
      display:flex; justify-content:space-between;
      padding:0.4rem 0;
      border-bottom:1px solid rgba(255,255,255,0.1);
      color:#ddd;
    }

    .tech-item span { color:#FFB300; font-weight:600; }

    .status-line { margin-top:0.8rem; text-align:center; font-weight:600; }
    .status-warning { color:#FFD54F; }
    .status-ok { color:#00E676; }

    .result {
      margin-top:1rem;
      background:#0e2048;
      padding:1rem;
      border-radius:8px;
      color:#ccc;
    }

    .acs-btn {
      display:block;
      background-color:#1DB954;
      color:#fff;
      border:none;
      padding:0.7rem 1.4rem;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
      margin:1.5rem auto 0.8rem;
      transition:0.2s;
    }
    .acs-btn:hover { background-color:#17a84d; }

    .back-btn {
      display:block;
      margin:0 auto 0.5rem;
      color:#1DB954;
      background:none;
      border:1px solid #1DB954;
      border-radius:6px;
      padding:0.4rem 1rem;
      cursor:pointer;
    }
    .back-btn:hover { background-color:#1DB954; color:white; }

    footer {
      margin-top:3rem;
      text-align:center;
      color:#999;
      font-size:0.9rem;
      padding:1rem;
    }

    /* âœ… Reloj cockpit Airbus */
    .acs-clock-header {
      font-family:'Orbitron','Consolas',monospace;
      color:#00ff80;
      font-weight:bold;
      background:rgba(0,255,128,0.08);
      padding:0.3rem 0.8rem;
      border-radius:6px;
      font-size:0.9rem;
      margin-left:1rem;
    }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header class="acs-header">
    <div class="acs-logo">
      <img src="acs_logo.png" alt="ACS Logo" />
      <h1>Aviation Capital Simulator</h1>
    </div>

    <nav class="acs-nav">
      <a href="dashboard.html">Main</a>
      <a href="finance.html">Finance</a>
      <a href="aircraft.html">Aircraft</a>
      <a href="routes.html" class="active">Routes</a>
      <a href="hr.html">HR</a>
      <a href="forum.html">Forum</a>
      <a href="support.html">Support</a>
    </nav>

    <div class="acs-auth">
      <a href="#" class="logout-btn" onclick="handleLogout()">Logout</a>
    </div>

    <div class="acs-clock-header" id="acs-clock">00:00 â€” 01 JAN 2025</div>
  </header>

  <!-- ===== MAIN ===== -->
  <main class="acs-main">
    <h2>ðŸ§­ Route Schedule Setup</h2>
    <p class="sub">Plan and evaluate your route performance based on technical parameters and operational constraints.</p>

    <div class="schedule-container">
      <label>Origin Airport (ICAO)</label>
      <input id="origin" placeholder="e.g. UCFM" />

      <label>Destination Airport (ICAO)</label>
      <input id="destination" placeholder="e.g. OMDB" />

      <label>Aircraft Type</label>
      <select id="aircraftType">
        <option value="A320">A320</option>
        <option value="B737-400">B737-400</option>
        <option value="B737-200">B737-200</option>
        <option value="E190">E190</option>
        <option value="ATR72">ATR72</option>
      </select>

      <hr class="divider" />

      <label>Days of Operation</label>
      <div class="days-row">
        <label><input type="checkbox" value="mon" />Mon</label>
        <label><input type="checkbox" value="tue" />Tue</label>
        <label><input type="checkbox" value="wed" />Wed</label>
        <label><input type="checkbox" value="thu" />Thu</label>
        <label><input type="checkbox" value="fri" />Fri</label>
        <label><input type="checkbox" value="sat" />Sat</label>
        <label><input type="checkbox" value="sun" />Sun</label>
      </div>

      <div class="options-center">
        <label><input type="checkbox" id="separateDays" /> Separate Days (Individual Flight Numbers)</label>
      </div>

      <hr class="divider" />

      <label>Departure Time (Local)</label>
      <input type="time" id="departure" value="06:00" />

      <label>Block Time (minutes)</label>
      <input type="number" id="blockTime" value="180" />

      <button class="acs-btn" onclick="calculateRoute()">Calculate & Save</button>

      <div class="result" id="result"></div>
    </div>

    <button class="back-btn" onclick="window.location.href='routes.html'">â¬… Back to Routes</button>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer>Â© 2025 Aviation Capital Simulator. All rights reserved.</footer>

  <!-- ===== SCRIPT ORIGINAL ===== -->
  <script>
    function handleLogout() {
      alert("ðŸ‘‹ Session closed. See you soon, Captain!");
      window.location.href = "login.html";
    }

    function distanceNM(lat1, lon1, lat2, lon2) {
      const R = 3440.065;
      const Ï†1 = lat1 * Math.PI / 180, Ï†2 = lat2 * Math.PI / 180;
      const Î”Ï† = (lat2 - lat1) * Math.PI / 180;
      const Î”Î» = (lon2 - lon1) * Math.PI / 180;
      const a = Math.sin(Î”Ï†/2)**2 + Math.cos(Ï†1)*Math.cos(Ï†2)*Math.sin(Î”Î»/2)**2;
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      return R * c;
    }

    const airports = {
      UCFM: [42.866, 74.529],
      OMDB: [25.253, 55.365],
      UUEE: [55.972, 37.414],
      EGLL: [51.470, -0.454],
      LEMD: [40.471, -3.562],
      VHHH: [22.308, 113.918],
      KJFK: [40.641, -73.778],
      KMIA: [25.795, -80.287],
      SAEZ: [-34.822, -58.535]
    };

    function calculateRoute() {
      const origin = document.getElementById("origin").value.toUpperCase();
      const destination = document.getElementById("destination").value.toUpperCase();
      const aircraft = document.getElementById("aircraftType").value;
      const dep = document.getElementById("departure").value;
      const blockTime = parseInt(document.getElementById("blockTime").value);

      if (!airports[origin] || !airports[destination]) {
        alert("âŒ Invalid ICAO code(s). Try again.");
        return;
      }

      const dist = distanceNM(...airports[origin], ...airports[destination]).toFixed(0);
      const arr = addMinutes(dep, blockTime);

      const days = Array.from(document.querySelectorAll(".days-row input:checked")).map(d => d.value);
      const separate = document.getElementById("separateDays").checked;

      const result = document.getElementById("result");
      result.innerHTML = `
        <div class='tech-list'>
          <div class='tech-item'><span>Distance:</span>${dist} NM</div>
          <div class='tech-item'><span>Departure:</span>${dep}</div>
          <div class='tech-item'><span>Arrival:</span>${arr}</div>
          <div class='tech-item'><span>Aircraft:</span>${aircraft}</div>
          <div class='tech-item'><span>Days:</span>${days.join(", ").toUpperCase() || "N/A"}</div>
        </div>
        <div class='status-line status-ok'>âœ… Route calculated and saved successfully.</div>
      `;

      const routeData = { origin, destination, aircraft, departure: dep, arrival: arr, blockTimeMin: blockTime, distanceNM: dist, days, separateDays: separate };
      localStorage.setItem("confirmedRoute", JSON.stringify(routeData));
    }

    function addMinutes(time, minsToAdd) {
      const [h, m] = time.split(":").map(Number);
      const total = h * 60 + m + minsToAdd;
      const nh = Math.floor(total / 60) % 24;
      const nm = total % 60;
      return `${String(nh).padStart(2, "0")}:${String(nm).padStart(2, "0")}`;
    }
  </script>

  <!-- âœ… Reloj cockpit Airbus sincronizado -->
  <script src="time_engine.js?v=1.2"></script>
</body>
</html>
