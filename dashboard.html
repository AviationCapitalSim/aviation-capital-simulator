<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Aviation Capital Simulator</title>
  <link rel="stylesheet" href="styles.css?v=3.2" />
  <style>
    /* === DASHBOARD STYLE (Finance-consistent) === */
    body {
      margin: 0;
      background-color: #081530;
      color: white;
      font-family: "Segoe UI", sans-serif;
    }

    .finance-panels {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .panel h3 {
      color: #FFB300;
      margin-bottom: 0.8rem;
    }

    .panel p {
      color: #ddd;
      font-size: 1rem;
      line-height: 1.4;
    }

    .panel:hover {
      transform: scale(1.02);
      transition: transform 0.2s ease;
    }

    .acs-btn {
      background-color: #00a86b;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 14px;
      margin-top: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .acs-btn:hover {
      background-color: #007d4e;
    }

    .aircraft-list, .alert-list {
      list-style: none;
      padding-left: 0;
    }

    .aircraft-list li, .alert-list li {
      margin: 6px 0;
    }

    .aircraft-list a {
      color: #FFB300;
      text-decoration: none;
    }

    .aircraft-list a:hover {
      text-decoration: underline;
    }

    .positive {
      color: #00d17a;
      font-weight: 600;
    }

    .alert-list li {
      color: #ff9b00;
    }

    canvas {
      background: rgba(255,255,255,0.03);
      border-radius: 6px;
      margin-top: 0.5rem;
    }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header class="acs-header">
    <div class="acs-logo">
      <img src="acs_logo.png" alt="ACS Logo" />
      <h1>Aviation Capital Simulator</h1>
    </div>

    <nav class="acs-nav">
      <a href="dashboard.html" class="active">Main</a>
      <a href="finance.html">Finance</a>
      <a href="aircraft.html">Aircraft</a>
      <a href="routes.html">Routes</a>
      <a href="market.html">Market</a>
      <a href="hr.html">HR</a>
      <a href="forum.html">Forum</a>
      <a href="profile.html">Profile</a>
      <a href="support.html">Support</a>
      <a href="#" class="logout-btn" onclick="handleLogout()">Logout</a>
    </nav>
  </header>

  <!-- ===== MAIN ===== -->
  <main class="acs-main">
    <h2 id="welcomeMessage">Welcome to your Airline Headquarters</h2>
    <p id="airlineSub"></p>
    <p class="sub">Your command center for managing fleets, routes, staff and capital.</p>

    <section class="finance-panels">
      <!-- üí† CREDITS -->
      <div class="panel">
        <h3>üí† Credits</h3>
        <p><strong id="creditsAmount">2,450 AC$</strong> available</p>
        <button class="acs-btn" onclick="window.location.href='buy_credits.html'">Buy</button>
      </div>

      <!-- ‚úàÔ∏è TOP EARNING AIRCRAFT -->
      <div class="panel">
        <h3>‚úàÔ∏è Top Earning Aircraft</h3>
        <ul id="topAircraftList" class="aircraft-list">
          <li><a href="aircraft_profile.html?id=EC-DDR">A320 (EC-DDR)</a> ‚Äî <span class="positive">+ $12,450</span></li>
          <li><a href="aircraft_profile.html?id=EI-KAV">B737-400 (EI-KAV)</a> ‚Äî <span class="positive">+ $9,780</span></li>
          <li><a href="aircraft_profile.html?id=TC-ALM">E190 (TC-ALM)</a> ‚Äî <span class="positive">+ $8,230</span></li>
        </ul>
      </div>

      <!-- ‚õΩ FUEL PRICE -->
      <div class="panel">
        <h3>‚õΩ Fuel Price</h3>
        <p><strong id="fuelPrice">$2.37 / gal</strong><br><small>Updated weekly</small></p>
        <button class="acs-btn" onclick="window.location.href='fuel.html'">Open</button>
      </div>

      <!-- üíº COMPANY VALUE -->
      <div class="panel">
        <h3>üíº Company Value</h3>
        <p>Total assets: <strong id="companyValue">$78.5M</strong></p>
        <p>Includes fleet, credits, and investments.</p>
        <button class="acs-btn" onclick="window.location.href='company_value.html'">Open</button>
      </div>

      <!-- üìä WEEKLY GROWTH -->
      <div class="panel">
        <h3>üìä Weekly Growth</h3>
        <p>+8.4% vs last week</p>
        <canvas id="growthChart" width="220" height="100"></canvas>
        <button class="acs-btn" onclick="window.location.href='finance.html'">View Graph</button>
      </div>

      <!-- ‚ö†Ô∏è OPERATIONAL ALERTS -->
      <div class="panel">
        <h3>‚ö†Ô∏è Operational Alerts</h3>
        <ul class="alert-list">
          <li>Maintenance due: <strong>B737-400 (EI-KAV)</strong></li>
          <li>Loan repayment in 2 days</li>
          <li>Low credits warning</li>
        </ul>
        <button class="acs-btn" onclick="window.location.href='alerts_center.html'">Open Center</button>
      </div>

      <!-- üì∞ GLOBAL NEWS & EVENTS -->
      <div class="panel">
        <h3>üì∞ Global News & Events</h3>
        <p><strong>‚ÄúOil prices surge after conflict in the Middle East.‚Äù</strong><br>
          Passenger demand drops 4% this week.</p>
        <button class="acs-btn" onclick="window.location.href='events.html'">Read More</button>
      </div>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="acs-footer">
    <p>¬© 2025 Aviation Capital Simulator. All rights reserved.</p>
  </footer>

  <!-- ===== SCRIPTS ===== -->
  <script>
    // ‚úÖ Display airline info from localStorage
    const airlineData = JSON.parse(localStorage.getItem("ACS_Airline"));
    if (airlineData && airlineData.name) {
      const icao = airlineData.icao ? ` (${airlineData.icao})` : "";
      document.getElementById("welcomeMessage").innerHTML =
        `Welcome to <span>${airlineData.name}${icao}</span>`;
      const flag = airlineData.country ? getFlagEmoji(airlineData.country) : "üåç";
      const country = airlineData.country || "Unknown";
      const model = airlineData.businessModel || "Operations";
      document.getElementById("airlineSub").innerHTML = `<span>${flag}</span> ${country} ‚Äî ${model}`;
    }

    // üåç Flag emoji generator
    function getFlagEmoji(country) {
      if (!country) return "üåç";
      const isoMap = { "United States": "US", "Spain": "ES", "Kyrgyzstan": "KG", "Russia": "RU" };
      const code = isoMap[country] || country.slice(0, 2).toUpperCase();
      return String.fromCodePoint(...[...code].map(c => 0x1F1E6 - 65 + c.charCodeAt()));
    }

    // üìä Simple mockup growth chart (to be replaced by Chart.js later)
    const canvas = document.getElementById("growthChart");
    const ctx = canvas.getContext("2d");
    ctx.strokeStyle = "#FFB300";
    ctx.beginPath();
    ctx.moveTo(10, 90);
    ctx.lineTo(50, 60);
    ctx.lineTo(90, 70);
    ctx.lineTo(130, 40);
    ctx.lineTo(180, 45);
    ctx.lineTo(210, 30);
    ctx.stroke();

    // üö™ Logout
    function handleLogout() {
      alert("üëã Session closed. See you soon, Captain!");
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
